ğŸ´â€â˜ ï¸ Partial SQL Pushdown - BASELINE BENCHMARK
Measuring BEFORE implementing bipartite query splitting

ğŸ“ Inserting 100 000 documents...
âœ… Inserted 100 000 documents

================================================================================
ğŸ´â€â˜ ï¸ PARTIAL SQL PUSHDOWN BASELINE (100 000 docs)
================================================================================
Measuring: Query time for mixed SQL + regex operators


ğŸ“Š Pure SQL (baseline)
   Should use SQLite index - FAST
   â±ï¸  Avg: 162.18ms | Min: 153.50ms | Max: 175.83ms
   ğŸ“„ Found: 50000 documents

ğŸ“Š Pure regex (baseline)
   Falls back to queryWithOurMemory - fetches ALL rows
   â±ï¸  Avg: 358.11ms | Min: 342.94ms | Max: 380.59ms
   ğŸ“„ Found: 10000 documents

ğŸ“Š Mixed: SQL + regex (THE KEY TEST)
   Currently: Fetches ALL rows (because of regex)
   Should: Fetch only active rows, then filter with regex
   â±ï¸  Avg: 383.92ms | Min: 364.67ms | Max: 404.20ms
   ğŸ“„ Found: 5000 documents

ğŸ“Š Mixed: Multiple SQL + regex
   Currently: Fetches ALL rows
   Should: Use SQL for status + age, then regex filter
   â±ï¸  Avg: 492.56ms | Min: 434.20ms | Max: 629.67ms
   ğŸ“„ Found: 18000 documents

ğŸ“Š Mixed: $and with SQL + regex
   Currently: Fetches ALL rows
   Should: SQL filters first, then regex
   â±ï¸  Avg: 203.18ms | Min: 194.43ms | Max: 219.79ms
   ğŸ“„ Found: 42000 documents

================================================================================
ğŸ“ˆ SUMMARY
================================================================================

Pure SQL query:        162.18ms (50000 docs)
Pure regex query:      358.11ms (10000 docs)
Mixed SQL + regex:     383.92ms (5000 docs)

âš ï¸  Mixed query is 137% slower than pure SQL
    (Should be close to pure SQL time after partial pushdown fix)

ğŸ’¡ EXPECTED IMPROVEMENT AFTER FIX:
   Current: 383.92ms (fetches ALL 100 000 rows)
   After:   ~162.18ms (fetches only 50 000 active rows)
   Speedup: 2.4x faster

================================================================================
âœ… BASELINE ESTABLISHED
================================================================================

Next: Implement partial SQL pushdown, then re-run to measure improvement
