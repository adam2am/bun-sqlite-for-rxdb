ğŸ´â€â˜ ï¸ Batch Operations - BASELINE BENCHMARK
Measuring BEFORE switching to single prepared statement
================================================================================
CURRENT IMPLEMENTATION: String concatenation with dynamic placeholders
PROBLEM: Each batch size generates different SQL â†’ statement cache miss
================================================================================
ğŸ“Š Test 1: Fixed Batch Size (100 docs Ã— 20 iterations)
   Measures: Consistent performance with same batch size
   Expected: Fast (statement cache hit every time)
   â±ï¸  Avg: 2.79ms | Median: 2.33ms | Min: 0.70ms | Max: 14.69ms
   ğŸ“Š Variance: 500.6%
ğŸ“Š Test 2: Varying Batch Sizes (THE KEY TEST - 20 iterations)
   Measures: Statement cache thrashing with different batch sizes
   Expected: SLOW (cache miss on every size change)
   Size  42: 2.26ms
   Size  73: 2.43ms
   Size 100: 1.25ms
   Size 127: 1.53ms
   Size 200: 2.48ms
   Size  42: 0.46ms
   Size 100: 0.78ms
   Size  73: 0.93ms
   Size 200: 2.14ms
   Size 127: 1.61ms
   Size  42: 0.40ms
   Size  73: 1.10ms
   Size 100: 1.82ms
   Size 127: 1.66ms
   Size 200: 13.17ms
   Size  42: 2.27ms
   Size 100: 5.15ms
   Size  73: 4.57ms
   Size 200: 9.23ms
   Size 127: 4.67ms
   â±ï¸  Avg: 3.00ms | Median: 2.14ms | Min: 0.40ms | Max: 13.17ms
   ğŸ“Š Variance: 426.3%
ğŸ“Š Test 3: Large Single Batch (10,000 docs)
   Measures: Performance with large batch
   Expected: Moderate (string concatenation overhead)
   â±ï¸  Time: 86.76ms
   ğŸ“Š Throughput: 115257 docs/sec
================================================================================
ğŸ“ˆ SUMMARY
================================================================================
Fixed batch size (100):    Avg: 2.79ms | Median: 2.33ms
Varying batch sizes:       Avg: 3.00ms | Median: 2.14ms
Large batch (10k):         86.76ms
âš ï¸  Varying sizes overhead: Avg 7% | Median -8%
ğŸ’¡ EXPECTED IMPROVEMENT AFTER FIX:
   Current: String concatenation â†’ cache miss on size change
   After:   Single prepared statement â†’ cache hit every time
   Expected: Varying sizes should match fixed size (~2.33ms median)
   Speedup:  0.9x faster for varying sizes
================================================================================
âœ… BASELINE ESTABLISHED
================================================================================