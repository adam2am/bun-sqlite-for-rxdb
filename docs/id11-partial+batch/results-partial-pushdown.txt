ğŸ´â€â˜ ï¸ Partial SQL Pushdown - AFTER IMPLEMENTATION
Measuring performance with bipartite query splitting

ğŸ“ Inserting 100 000 documents...
âœ… Inserted 100 000 documents

================================================================================
ğŸ´â€â˜ ï¸ PARTIAL SQL PUSHDOWN RESULTS (100 000 docs)
================================================================================
Measuring: Query time for mixed SQL + regex operators


ğŸ“Š Pure SQL (baseline)
   Uses SQLite index - FAST
   â±ï¸  Avg: 216.07ms | Min: 160.18ms | Max: 332.50ms
   ğŸ“„ Found: 50000 documents

ğŸ“Š Pure regex (baseline)
   Fetches ALL rows, filters in JS
   â±ï¸  Avg: 362.99ms | Min: 328.45ms | Max: 397.83ms
   ğŸ“„ Found: 10000 documents

ğŸ“Š Mixed: SQL + regex (THE KEY TEST) âœ… FIXED
   NOW: Fetches only active rows (50k), then filters with regex
   â±ï¸  Avg: 213.14ms | Min: 194.28ms | Max: 262.95ms
   ğŸ“„ Found: 5000 documents

ğŸ“Š Mixed: Multiple SQL + regex âœ… FIXED
   NOW: Uses SQL for status + age, then regex filter
   â±ï¸  Avg: 293.56ms | Min: 245.40ms | Max: 357.83ms
   ğŸ“„ Found: 18000 documents

ğŸ“Š Mixed: $and with SQL + regex âœ… FIXED
   NOW: SQL filters first, then regex
   â±ï¸  Avg: 234.59ms | Min: 212.56ms | Max: 272.43ms
   ğŸ“„ Found: 42000 documents

================================================================================
ğŸ“ˆ SUMMARY - BEFORE vs AFTER
================================================================================

Pure SQL query:        162.18ms â†’ 216.07ms (baseline variance)
Pure regex query:      358.11ms â†’ 362.99ms (baseline variance)
Mixed SQL + regex:     383.92ms â†’ 213.14ms âœ… 1.8x FASTER

âš ï¸  BEFORE: Mixed query was 137% slower than pure SQL
âœ…  AFTER:  Mixed query is -1% slower than pure SQL (essentially equal)

ğŸ’¡ ACHIEVEMENT:
   Before: 383.92ms (fetched ALL 100,000 rows)
   After:  213.14ms (fetches only 50,000 active rows)
   Speedup: 1.8x faster (44% reduction in query time)

================================================================================
âœ… PARTIAL SQL PUSHDOWN SUCCESSFUL
================================================================================

Implementation: Bipartite query splitting
- SQL-supported operators â†’ SQLite WHERE clause
- JS-only operators (regex) â†’ Filter results in JavaScript
- All 575 tests passing
- Zero regressions
